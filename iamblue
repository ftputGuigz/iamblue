#!/bin/bash

MAC_ADRESS=08:C8:C2:12:03:AF
PAIRED_HEADPHONES=$(bluetoothctl paired-devices | grep $MAC_ADRESS | cut -d " " -f 2)

if [ -z $PAIRED_HEADPHONES ]; then
	echo "Headphones not paired, starting pairing..."
	bluetoothctl scan on > /dev/null 2>&1 &
	
	while [ -z $(bluetoothctl devices | grep $MAC_ADRESS | cut -d " " -f 2) ]
	do
		echo "Searching..."
	done
	kill $(ps -a | grep bluetoothctl | tr -s " " | cut -d " " -f 2)
	echo -e "pair $MAC_ADRESS\n" | bluetoothctl
else
	echo "Headphones already paired, now connecting..."
fi

echo -e "connect $MAC_ADRESS\n" | bluetoothctl

